<%- include('header.html', {addCss: ["main"]}) -%>

	<div class="container">
		<div class="page-header">
			<h1>纺支宝ERP供货商管理插件</h1>
			<p class="lead text-muted">查看供应商信息是否发生变化</p>
		</div>

		<div class="card">
			<div class="card-header">
				<h5 class="mb-0">上传供应商数据文件</h5>
			</div>
			<div class="card-body">
				<!-- 上传区域 -->
				<div class="upload-area" id="uploadArea">
					<div class="upload-icon">
						<i class="fas fa-file-excel"></i>
					</div>
					<h5>拖放Excel文件到此处，或点击上传</h5>
					<p class="text-muted">支持的文件格式：.xlsx, .xls, .csv</p>
					<input type="file" class="file-input" id="fileInput" accept=".xlsx, .xls, .csv">
				</div>

				<!-- 上传状态消息 -->
				<div class="upload-message alert" id="uploadMessage" role="alert"></div>

				<!-- 加载指示器 -->
				<div class="spinner-container">
					<div class="spinner-border text-primary" role="status">
						<span class="visually-hidden">上传中...</span>
					</div>
					<p class="mt-2">正在上传文件，请稍候...</p>
				</div>
			</div>
		</div>

		<div class="card hidden" id="addSupplierCard">
			<div class="card-header">
				<h5 class="mb-0">新增供应商列表</h5>
			</div>
			<div class="card-body">
				<table id="addSupplierTable" class="table table-striped table-hover"></table>
			</div>
		</div>

		<div class="card hidden" id="updateSupplierCard">
			<div class="card-header">
				<h5 class="mb-0">有更新的供应商列表</h5>
			</div>
			<div class="card-body">
				<table id="updateSupplierTable" class="table table-striped table-hover"></table>
			</div>
		</div>

		<!-- 表格容器 -->
		<div class="card">
			<div class="card-header">
				<h5 class="mb-0">现有供应商列表</h5>
			</div>
			<div class="card-body">
				<table id="supplierStoreTable" class="hidden">
					<thead>
						<tr class="table-primary">
							<th>门店ID</th>
							<th>供应商</th>
							<th>门店名称</th>
							<th>档口号</th>
							<th>门店地址</th>
							<th>区域编码</th>
							<th>门店顺序</th>
							<th>供应商类型</th>
							<th>是否开启代拿</th>
							<th>直发订单开启用户快递</th>
							<th>自动推送订单打印</th>
							<th>待拿货数据同步供应商</th>
							<th>允许改价</th>
							<th>采购付款节点</th>
							<th>联系电话</th>
						</tr>
					</thead>
					<tbody>
						<% if (suppliers) { %>
							<% suppliers.forEach(function(supplier){ %>
								<%- include('row.html', {supplier: supplier}) -%>
							<% }); %>
						<% } %>
					</tbody>
				</table>
			</div>
		</div>
	</div>

	<%- include('footer.html', {addJs: ['main']}) -%>